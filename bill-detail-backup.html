<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-zh="Ë¥¶ÂçïËØ¶ÊÉÖ" data-en="Bill Details">Ë¥¶ÂçïËØ¶ÊÉÖ</title>
    <link rel="stylesheet" href="assets/css/common.css">
</head>
<body>
    <!-- ÂØºËà™Ê†è -->
    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-brand">
                <h1 data-zh="ËÉΩÊ∫êÁÆ°ÁêÜÁ≥ªÁªü" data-en="Energy Management System">ËÉΩÊ∫êÁÆ°ÁêÜÁ≥ªÁªü</h1>
            </div>
            <div class="nav-menu">
                <a href="dashboard.html" class="nav-link" data-zh="‰ª™Ë°®Êùø" data-en="Dashboard">‰ª™Ë°®Êùø</a>
                <a href="users.html" class="nav-link" data-zh="Áî®Êà∑ÁÆ°ÁêÜ" data-en="User Management">Áî®Êà∑ÁÆ°ÁêÜ</a>
                <a href="bills.html" class="nav-link" data-zh="Ë¥¶ÂçïÁÆ°ÁêÜ" data-en="Bill Management">Ë¥¶ÂçïÁÆ°ÁêÜ</a>
                <a href="reports.html" class="nav-link" data-zh="Êä•Ë°®ÂàÜÊûê" data-en="Reports">Êä•Ë°®ÂàÜÊûê</a>
                <a href="settings.html" class="nav-link" data-zh="Á≥ªÁªüËÆæÁΩÆ" data-en="Settings">Á≥ªÁªüËÆæÁΩÆ</a>
            </div>
            <div class="nav-actions">
                <div class="lang-toggle">
                    <button class="lang-btn active" data-lang="zh">‰∏≠Êñá</button>
                    <button class="lang-btn" data-lang="en">EN</button>
                </div>
                <div class="user-menu">
                    <div class="user-avatar">ÁÆ°</div>
                    <span data-zh="ÁÆ°ÁêÜÂëò" data-en="Admin">ÁÆ°ÁêÜÂëò</span>
                </div>
            </div>
        </div>
    </nav>

    <!-- ‰∏ªÂÜÖÂÆπÂå∫Âüü -->
    <main class="main-content">
        <div class="container">
            <!-- È°µÈù¢Ê†áÈ¢òÂíåËøîÂõûÊåâÈíÆ -->
            <div class="page-header">
                <div class="header-left">
                    <button class="btn btn-secondary" onclick="goBack()">
                        <span>‚Üê</span>
                        <span data-zh="ËøîÂõû" data-en="Back">ËøîÂõû</span>
                    </button>
                    <div class="header-text">
                        <div class="header-title-section">
                            <span id="detail-username" class="user-name-header">Priya Sharma</span>
                            <span id="header-business-type" class="business-type">Â±ÖÊ∞ë</span>
                        </div>
                        <div class="header-info">
                            <span class="header-info-item">
                                <span class="info-label" data-zh="ÁîµË°®Âè∑" data-en="Meter No.">ÁîµË°®Âè∑</span>
                                <span id="header-electric-number" class="info-value">1111111001</span>
                            </span>
                            <span class="header-info-item">
                                <span class="info-label" data-zh="Âú∞ÂùÄ" data-en="Address">Âú∞ÂùÄ</span>
                                <span id="header-address" class="info-value">Ê≥∞Á±≥Â∞îÁ∫≥Âæ∑</span>
                            </span>
                        </div>
                    </div>
                </div>
                <div class="header-actions">
                    <button class="btn btn-secondary" onclick="downloadBill()">
                        <span>üìÑ</span>
                        <span data-zh="‰∏ãËΩΩË¥¶Âçï" data-en="Download Bill">‰∏ãËΩΩË¥¶Âçï</span>
                    </button>
                </div>
            </div>

            <!-- Áî®Êà∑Âü∫Êú¨‰ø°ÊÅØ -->
            <div class="bill-summary">
                <div class="info-horizontal">
                    <span class="info-pair">
                        <span class="label" data-zh="Ë¥¶Êúü" data-en="Billing Period">Ë¥¶Êúü</span>
                        <span id="detail-period" class="value">2025Âπ¥9Êúà</span>
                    </span>
                    <span class="info-pair">
                        <span class="label" data-zh="ËÆ°Ë¥πÊñπÂºè" data-en="Billing Method">ËÆ°Ë¥πÊñπÂºè</span>
                        <span id="detail-billing-method" class="value">Èò∂Ê¢ØÁîµË¥π</span>
                    </span>
                    <span class="info-pair">
                        <span class="label" data-zh="Áî®ÁîµÈáè" data-en="Usage">Áî®ÁîµÈáè</span>
                        <div class="usage-detail">
                            <span id="detail-usage" class="value">387 kWh</span>
                            <span id="reading-detail" class="reading-info">ÔºàÂºÄÂßãÔºö84,406 ‚Äî ÁªìÊùüÔºö84,793Ôºâ</span>
                        </div>
                    </span>
                    <span class="info-pair">
                        <span class="label" data-zh="Ë¥πÁî®" data-en="Cost">Ë¥πÁî®</span>
                        <span id="detail-amount" class="value amount">‚Çπ2546</span>
                    </span>
                </div>
            </div>


            <!-- ËØ¶ÁªÜ‰ø°ÊÅØÂ±ïÁ§∫Âå∫Âüü -->
            <div class="details-grid">
                <!-- Ë¥¶ÂçïÁÆ°ÁêÜË°®Ê†º -->
                <div class="cost-breakdown-section">
                    <div class="section-header">
                        <h4 data-zh="Ë¥¶ÂçïÁÆ°ÁêÜ" data-en="Bill Management">Ë¥¶ÂçïÁÆ°ÁêÜ</h4>
                    </div>
                    <div class="cost-table-container">
                        <div class="cost-table">
                            <div class="cost-header">
                                <span data-zh="È°πÁõÆ" data-en="Item">È°πÁõÆ</span>
                                <span data-zh="ÈáëÈ¢ùÔºàÂç¢ÊØîÔºâ" data-en="Amount (‚Çπ)">ÈáëÈ¢ùÔºàÂç¢ÊØîÔºâ</span>
                                <span data-zh="ËØ¥Êòé" data-en="Description">ËØ¥Êòé</span>
                            </div>
                            <div id="cost-body" class="cost-body">
                                <!-- Ë¥πÁî®ÊòéÁªÜÊï∞ÊçÆÁî±JavaScriptÁîüÊàê -->
                            </div>
                            <div class="cost-total">
                                <span class="final-label" data-zh="ÊÄªË¥πÁî®" data-en="Total Cost">ÊÄªË¥πÁî®</span>
                                <span class="final-amount" id="final-total-amount">‚Çπ1,107</span>
                                <span class="final-desc" data-zh="ÂÆûÈôÖÁº¥Ë¥πÈáëÈ¢ù" data-en="Actual Payment Amount">ÂÆûÈôÖÁº¥Ë¥πÈáëÈ¢ù</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Èò∂Ê¢ØÊî∂Ë¥πË°®Ê†º -->
                <div class="pricing-section">
                    <div class="section-header">
                        <h4 data-zh="Èò∂Ê¢ØÊî∂Ë¥πÊòéÁªÜ" data-en="Tiered Pricing Details">Èò∂Ê¢ØÊî∂Ë¥πÊòéÁªÜ</h4>
                    </div>
                    <div class="pricing-table-container">
                        <div class="pricing-table">
                            <div class="pricing-header">
                                <span data-zh="Èò∂Ê¢Ø" data-en="Tier">Èò∂Ê¢Ø</span>
                                <span data-zh="ËåÉÂõ¥(kWh)" data-en="Range(kWh)">ËåÉÂõ¥(kWh)</span>
                                <span data-zh="Áîµ‰ª∑(‚Çπ/kWh)" data-en="Rate(‚Çπ/kWh)">Áîµ‰ª∑(‚Çπ/kWh)</span>
                                <span data-zh="Áî®Èáè(kWh)" data-en="Usage(kWh)">Áî®Èáè(kWh)</span>
                                <span data-zh="ÈáëÈ¢ù(‚Çπ)" data-en="Amount(‚Çπ)">ÈáëÈ¢ù(‚Çπ)</span>
                            </div>
                            <div id="pricing-body" class="pricing-body">
                                <!-- Èò∂Ê¢ØÊï∞ÊçÆÁî±JavaScriptÁîüÊàê -->
                            </div>
                            <div class="pricing-total">
                                <span class="total-label" data-zh="Â∞èËÆ°" data-en="Subtotal">Â∞èËÆ°</span>
                                <span class="total-usage" id="total-tier-usage">387</span>
                                <span class="total-amount" id="total-tier-amount">‚Çπ900.00</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="assets/js/common.js"></script>
    <script>
        // Âú∞Âå∫Êï∞ÊçÆ
        const regionsData = {
            'tamil-nadu': { name: 'Ê≥∞Á±≥Â∞îÁ∫≥Âæ∑', nameEn: 'Tamil Nadu' },
            'karnataka': { name: 'Âç°Á∫≥Â°îÂÖã', nameEn: 'Karnataka' },
            'andhra-pradesh': { name: 'ÂÆâÂæóÊãâÈÇ¶', nameEn: 'Andhra Pradesh' },
            'kerala': { name: 'ÂñÄÊãâÊãâ', nameEn: 'Kerala' }
        };

        // Ëé∑ÂèñURLÂèÇÊï∞
        function getUrlParameter(name) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(name);
        }

        // ÁîüÊàêË¥¶ÂçïËØ¶ÊÉÖÊï∞ÊçÆ
        function generateBillDetails(bill, month) {
            // ÁîüÊàêÈò∂Ê¢ØÊî∂Ë¥πÊòéÁªÜÔºà‰ªÖÂØπÈò∂Ê¢ØÁîµË¥πÊòæÁ§∫Ôºâ
            if (bill.billingMethod === 'tiered') {
                generateTieredPricing(bill);
            } else {
                // ÂØπ‰∫éÈùûÈò∂Ê¢ØÁîµË¥πÔºåÊòæÁ§∫Âçï‰∏ÄË¥πÁéá
                generateSingleRate(bill);
            }
        }

        function generateTieredPricing(bill) {
            const pricingBody = document.getElementById('pricing-body');
            const totalUsage = bill.usage;

            // Âç∞Â∫¶Â±ÖÊ∞ëÈò∂Ê¢ØÁîµ‰ª∑ÁªìÊûÑ
            const tiers = [
                { name: 'Á¨¨‰∏ÄÈò∂Ê¢Ø', range: '0-100', rate: 3.35, min: 0, max: 100 },
                { name: 'Á¨¨‰∫åÈò∂Ê¢Ø', range: '101-200', rate: 4.60, min: 101, max: 200 },
                { name: 'Á¨¨‰∏âÈò∂Ê¢Ø', range: '201-400', rate: 6.85, min: 201, max: 400 },
                { name: 'Á¨¨ÂõõÈò∂Ê¢Ø', range: '400+', rate: 8.15, min: 401, max: Infinity }
            ];

            let remainingUsage = totalUsage;
            let totalAmount = 0;
            const tierDetails = [];

            tiers.forEach((tier, index) => {
                if (remainingUsage <= 0) {
                    tierDetails.push({
                        ...tier,
                        usage: 0,
                        amount: 0
                    });
                    return;
                }

                const tierCapacity = tier.max === Infinity ? remainingUsage : Math.min(tier.max - tier.min + 1, remainingUsage);
                const tierUsage = Math.min(remainingUsage, tierCapacity);
                const tierAmount = tierUsage * tier.rate;

                tierDetails.push({
                    ...tier,
                    usage: tierUsage,
                    amount: tierAmount
                });

                totalAmount += tierAmount;
                remainingUsage -= tierUsage;
            });

            // Ê∏≤ÊüìÈò∂Ê¢ØË°®Ê†º
            pricingBody.innerHTML = tierDetails.map(tier => `
                <div class="pricing-row ${tier.usage > 0 ? 'used' : 'unused'}">
                    <span class="tier-name">${tier.name}</span>
                    <span class="tier-range">${tier.range}</span>
                    <span class="tier-rate">‚Çπ${tier.rate.toFixed(2)}</span>
                    <span class="tier-usage">${tier.usage}</span>
                    <span class="tier-amount">‚Çπ${tier.amount.toFixed(2)}</span>
                </div>
            `).join('');

            // Êõ¥Êñ∞Èò∂Ê¢ØÁîµË¥πÂ∞èËÆ°
            document.getElementById('total-tier-usage').textContent = totalUsage;
            document.getElementById('total-tier-amount').textContent = `‚Çπ${totalAmount.toFixed(2)}`;

            // ÁîüÊàêË¥πÁî®ÊòéÁªÜ
            generateCostBreakdown(totalAmount, totalUsage);
        }

        function generateCostBreakdown(electricityFee, usage) {
            const costBody = document.getElementById('cost-body');

            // ËÆ°ÁÆóÂêÑÈ°πË¥πÁî®
            const transmissionFee = electricityFee * 0.15; // ËæìÈÖçÁîµË¥π 15%
            const renewableFund = electricityFee * 0.02; // ÂèØÂÜçÁîüËÉΩÊ∫êÂü∫Èáë 2%
            const subtotal = electricityFee + transmissionFee + renewableFund;
            const tax = subtotal * 0.05; // Â¢ûÂÄºÁ®é 5%
            const totalCost = subtotal + tax;

            const costItems = [
                {
                    item: currentLanguage === 'zh' ? 'ÁîµË¥πÔºàÈò∂Ê¢ØÁîµ‰ª∑Ôºâ' : 'Electricity (Tiered Rate)',
                    amount: electricityFee,
                    description: currentLanguage === 'zh' ? `${usage}Âçï‰ΩçÁî®ÁîµÈáèËÆ°ÁÆó` : `${usage} units electricity calculation`
                },
                {
                    item: currentLanguage === 'zh' ? 'ËæìÈÖçÁîµË¥π' : 'Transmission & Distribution',
                    amount: transmissionFee,
                    description: currentLanguage === 'zh' ? `15% √ó ‚Çπ${electricityFee.toFixed(0)}` : `15% of ‚Çπ${electricityFee.toFixed(0)}`
                },
                {
                    item: currentLanguage === 'zh' ? 'ÂèØÂÜçÁîüËÉΩÊ∫êÂü∫Èáë' : 'Renewable Energy Fund',
                    amount: renewableFund,
                    description: currentLanguage === 'zh' ? `2% √ó ‚Çπ${electricityFee.toFixed(0)}` : `2% of ‚Çπ${electricityFee.toFixed(0)}`
                },
                {
                    item: currentLanguage === 'zh' ? 'Â¢ûÂÄºÁ®éÔºà5%Ôºâ' : 'VAT (5%)',
                    amount: tax,
                    description: currentLanguage === 'zh' ? `5% √ó ‚Çπ${subtotal.toFixed(0)}` : `5% of ‚Çπ${subtotal.toFixed(0)}`
                }
            ];

            // Ê∏≤ÊüìË¥πÁî®ÊòéÁªÜË°®Ê†º
            costBody.innerHTML = costItems.map(item => `
                <div class="cost-row">
                    <span class="cost-item">${item.item}</span>
                    <span class="cost-amount">‚Çπ${item.amount.toFixed(0)}</span>
                    <span class="cost-desc">${item.description}</span>
                </div>
            `).join('');

            // Êõ¥Êñ∞ÊÄªË¥πÁî®
            document.getElementById('final-total-amount').textContent = `‚Çπ${totalCost.toFixed(0)}`;

            // ÂêåÊó∂Êõ¥Êñ∞È°µÈù¢È°∂ÈÉ®ÁöÑÊÄªÈáëÈ¢ùÊòæÁ§∫
            document.getElementById('detail-amount').textContent = `‚Çπ${totalCost.toFixed(0)}`;
        }

        function generateSingleRate(bill) {
            const pricingBody = document.getElementById('pricing-body');
            const baseElectricityFee = bill.usage * 4.5; // ÂÅáËÆæÁªü‰∏ÄË¥πÁéá‰∏∫4.5Âç¢ÊØî/Âçï‰Ωç

            pricingBody.innerHTML = `
                <div class="pricing-row used">
                    <span class="tier-name">Áªü‰∏ÄË¥πÁéá</span>
                    <span class="tier-range">ÂÖ®ÈÉ®Áî®Èáè</span>
                    <span class="tier-rate">‚Çπ4.50</span>
                    <span class="tier-usage">${bill.usage}</span>
                    <span class="tier-amount">‚Çπ${baseElectricityFee.toFixed(2)}</span>
                </div>
            `;

            document.getElementById('total-tier-usage').textContent = bill.usage;
            document.getElementById('total-tier-amount').textContent = `‚Çπ${baseElectricityFee.toFixed(2)}`;

            // ÁîüÊàêË¥πÁî®ÊòéÁªÜ
            generateCostBreakdown(baseElectricityFee, bill.usage);
        }

        function goBack() {
            window.history.back();
        }

        function downloadBill() {
            EnergySystem.showNotification('Ë¥¶Âçï‰∏ãËΩΩÂäüËÉΩÂºÄÂèë‰∏≠...', 'info');
        }

        function payBill() {
            EnergySystem.showNotification('Ë∑≥ËΩ¨Âà∞‰ªòË¥πÈ°µÈù¢...', 'info');
        }

        // È°µÈù¢ÂàùÂßãÂåñ
        document.addEventListener('DOMContentLoaded', function() {
            // ËÆæÁΩÆÂΩìÂâçÈ°µÈù¢ÂØºËà™
            EnergySystem.setActiveNavigation('bills.html');

            // ÂàùÂßãÂåñËØ≠Ë®ÄÁ≥ªÁªü
            EnergySystem.initLanguageSystem();

            // Ëé∑ÂèñË¥¶ÂçïIDÂèÇÊï∞
            const billId = getUrlParameter('id');
            const month = getUrlParameter('month') || '2025-09';

            if (billId) {
                // Ê®°ÊãüËé∑ÂèñË¥¶ÂçïÊï∞ÊçÆÔºàÂÆûÈôÖÂ∫îËØ•‰ªéÂêéÁ´ØAPIËé∑ÂèñÔºâ
                const mockBill = {
                    id: billId,
                    userName: 'Priya Sharma',
                    userNameEn: 'Priya Sharma',
                    avatar: 'P',
                    usage: 387,
                    amount: 156.78,
                    region: 'tamil-nadu',
                    businessType: 'residential',
                    billingMethod: 'tiered',
                    electricNumber: billId.padStart(10, '1')
                };

                // Â°´ÂÖÖÈ°µÈù¢Êï∞ÊçÆ
                const businessTypeTexts = {
                    zh: { residential: 'Â±ÖÊ∞ë', industrial: 'Â∑•‰∏ö', commercial: 'ÂïÜ‰∏ö', agricultural: 'ÂÜú‰∏ö' },
                    en: { residential: 'Residential', industrial: 'Industrial', commercial: 'Commercial', agricultural: 'Agricultural' }
                };

                const billingMethodTexts = {
                    zh: { tiered: 'Èò∂Ê¢ØÁîµË¥π', 'time-of-use': 'ÂàÜÊó∂Áîµ‰ª∑', 'flat-rate': 'Âçï‰∏ÄÁîµ‰ª∑', 'peak-valley': 'Â≥∞Ë∞∑Áîµ‰ª∑' },
                    en: { tiered: 'Tiered', 'time-of-use': 'Time-of-Use', 'flat-rate': 'Flat Rate', 'peak-valley': 'Peak-Valley' }
                };

                // Â°´ÂÖÖÂü∫Êú¨‰ø°ÊÅØ
                document.getElementById('detail-username').textContent = currentLanguage === 'zh' ? mockBill.userName : mockBill.userNameEn;
                document.getElementById('header-business-type').textContent = businessTypeTexts[currentLanguage][mockBill.businessType];

                // Â°´ÂÖÖÈ°µÈù¢Â§¥ÈÉ®‰ø°ÊÅØ
                document.getElementById('header-electric-number').textContent = mockBill.electricNumber;
                document.getElementById('header-address').textContent = regionsData[mockBill.region].name;

                // Â°´ÂÖÖË¥¶Êúü‰ø°ÊÅØ
                const monthText = currentLanguage === 'zh' ?
                    `${month.split('-')[0]}Âπ¥${parseInt(month.split('-')[1])}Êúà` :
                    new Date(month + '-01').toLocaleDateString('en-US', { year: 'numeric', month: 'long' });
                document.getElementById('detail-period').textContent = monthText;
                document.getElementById('detail-billing-method').textContent = billingMethodTexts[currentLanguage][mockBill.billingMethod];

                // ÁîüÊàêÊäÑË°®ËØªÊï∞ÔºàÊ®°ÊãüÊï∞ÊçÆÔºâ
                const currentReading = Math.floor(Math.random() * 50000 + 50000);
                const previousReading = currentReading - mockBill.usage;

                // Â°´ÂÖÖÁî®ÁîµÈáèÂíåÈáëÈ¢ù‰ø°ÊÅØÔºàÂàùÂßãÂÄºÔºåÂêéÁª≠‰ºöË¢´Ë¥πÁî®ËÆ°ÁÆóÊõ¥Êñ∞Ôºâ
                document.getElementById('detail-usage').textContent = `${mockBill.usage} kWh`;
                const readingText = currentLanguage === 'zh' ?
                    `ÔºàÂºÄÂßãÔºö${previousReading.toLocaleString()} ‚Äî ÁªìÊùüÔºö${currentReading.toLocaleString()}Ôºâ` :
                    `ÔºàStart: ${previousReading.toLocaleString()} ‚Äî End: ${currentReading.toLocaleString()}Ôºâ`;
                document.getElementById('reading-detail').textContent = readingText;
                document.getElementById('detail-amount').textContent = `‚Çπ${mockBill.amount.toFixed(0)}`;

                // ÁîüÊàêËØ¶ÁªÜÊï∞ÊçÆ
                generateBillDetails(mockBill, month);
            } else {
                EnergySystem.showNotification('Êú™ÊâæÂà∞Ë¥¶Âçï‰ø°ÊÅØ', 'error');
                setTimeout(() => {
                    window.location.href = 'bills.html';
                }, 2000);
            }
        });
    </script>

    <style>
        /* È°µÈù¢Â§¥ÈÉ®Ê†∑Âºè */
        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: var(--space-8);
            gap: var(--space-6);
        }

        .header-left {
            display: flex;
            align-items: flex-start;
            gap: var(--space-4);
        }

        .header-title-section {
            display: flex;
            align-items: center;
            gap: var(--space-3);
            margin-bottom: var(--space-1);
        }

        .header-title-section h2 {
            font-size: 28px;
            font-weight: var(--font-weight-medium);
            margin: 0;
        }

        .user-name-header {
            font-size: 28px;
            font-weight: var(--font-weight-medium);
            color: var(--text-primary);
        }

        .header-info {
            display: flex;
            gap: var(--space-6);
            margin-top: var(--space-3);
        }

        .header-info-item {
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }

        .info-label {
            font-size: 14px;
            font-weight: var(--font-weight-medium);
            color: var(--text-secondary);
        }

        .info-value {
            font-size: 15px;
            font-weight: var(--font-weight-medium);
            color: var(--text-primary);
        }

        .header-actions {
            display: flex;
            gap: var(--space-3);
        }

        /* Ë¥¶ÂçïÊ¶ÇË¶ÅÂç°Áâá */
        .bill-summary {
            margin-bottom: var(--space-8);
            padding: var(--space-6);
            background: var(--background);
            border: var(--border);
            border-radius: var(--radius);
        }

        .info-horizontal {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
        }

        .info-pair {
            display: flex;
            align-items: center;
            gap: var(--space-2);
            flex: 1;
            justify-content: center;
        }

        .info-pair .label {
            font-size: 16px;
            font-weight: var(--font-weight-medium);
            color: var(--text-secondary);
        }

        .info-pair .value {
            font-size: 16px;
            font-weight: var(--font-weight-semibold);
            color: var(--text-primary);
        }

        .info-pair .value.amount {
            font-size: 20px;
            color: var(--primary);
            font-family: 'Monaco', 'Courier New', monospace;
        }

        .usage-detail {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--space-1);
        }

        .reading-info {
            font-size: 12px;
            color: var(--text-tertiary);
            font-weight: var(--font-weight-regular);
        }


        /* ËØ¶ÁªÜ‰ø°ÊÅØÁΩëÊ†ºÂ∏ÉÂ±Ä */
        .details-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-8);
            margin-bottom: var(--space-8);
        }

        /* Èò∂Ê¢ØÊî∂Ë¥πÂíåË¥πÁî®ÊòéÁªÜË°®Ê†º */
        .pricing-section,
        .cost-breakdown-section {
            background: var(--background);
            border: var(--border);
            border-radius: var(--radius);
            overflow: hidden;
        }

        .section-header {
            padding: var(--space-5);
            background: var(--surface);
            border-bottom: var(--border);
        }

        .section-header h4 {
            margin: 0;
            font-size: 18px;
            font-weight: var(--font-weight-medium);
        }

        .pricing-table-container,
        .cost-table-container {
            padding: var(--space-5);
        }

        .pricing-table,
        .cost-table {
            border: var(--border);
            border-radius: var(--radius);
            overflow: hidden;
        }

        .pricing-header,
        .cost-header {
            display: grid;
            gap: var(--space-3);
            background: var(--divider);
            padding: var(--space-4);
            font-weight: var(--font-weight-semibold);
            font-size: 14px;
            color: var(--text-primary);
        }

        .pricing-header {
            grid-template-columns: 1.5fr 1fr 1fr 1fr 1fr;
        }

        .cost-header {
            grid-template-columns: 2fr 1fr 2fr;
        }

        .pricing-body,
        .cost-body {
            max-height: none;
        }

        .pricing-row,
        .cost-row {
            display: grid;
            gap: var(--space-3);
            padding: var(--space-4);
            border-bottom: var(--border);
            font-size: 14px;
            transition: all 0.15s ease;
        }

        .pricing-row {
            grid-template-columns: 1.5fr 1fr 1fr 1fr 1fr;
        }

        .cost-row {
            grid-template-columns: 2fr 1fr 2fr;
        }

        .pricing-row:last-child,
        .cost-row:last-child {
            border-bottom: none;
        }

        .pricing-row.used {
            background: rgba(40, 167, 69, 0.05);
            border-left: 4px solid var(--success);
        }

        .pricing-row.unused {
            background: var(--surface);
            opacity: 0.6;
        }

        .cost-row {
            background: var(--background);
        }

        .cost-row:nth-child(even) {
            background: var(--surface);
        }

        .pricing-total,
        .cost-total {
            display: grid;
            gap: var(--space-3);
            padding: var(--space-4);
            background: var(--primary);
            color: white;
            font-weight: var(--font-weight-semibold);
        }

        .pricing-total {
            grid-template-columns: 1.5fr 1fr 1fr 1fr 1fr;
        }

        .cost-total {
            grid-template-columns: 2fr 1fr 2fr;
        }

        .pricing-total .total-label {
            grid-column: 1 / 4;
            text-align: right;
        }

        .cost-total .final-label {
            font-size: 16px;
        }

        .cost-total .final-amount {
            font-size: 18px;
            font-weight: var(--font-weight-bold);
        }

        .cost-total .final-desc {
            font-size: 13px;
            opacity: 0.9;
        }

        .tier-name,
        .cost-item {
            font-weight: var(--font-weight-medium);
        }

        .tier-rate,
        .tier-amount,
        .cost-amount {
            font-family: 'Monaco', 'Courier New', monospace;
            text-align: right;
        }

        .tier-usage {
            text-align: center;
        }

        .cost-desc {
            font-size: 13px;
            color: var(--text-secondary);
        }

        /* ‰∏öÊÄÅÊ†∑Âºè */
        .business-type {
            padding: var(--space-1) var(--space-2);
            border-radius: calc(var(--radius) / 2);
            font-size: 12px;
            font-weight: var(--font-weight-medium);
            display: inline-block;
        }

        .business-type {
            background: rgba(40, 167, 69, 0.1);
            color: var(--success);
        }

        /* ÂìçÂ∫îÂºèËÆæËÆ° */
        @media (max-width: 1200px) {
            .details-grid {
                grid-template-columns: 1fr;
                gap: var(--space-6);
            }

            .info-horizontal {
                flex-wrap: wrap;
                gap: var(--space-6);
            }
        }

        @media (max-width: 768px) {
            .page-header {
                flex-direction: column;
                align-items: stretch;
                gap: var(--space-4);
            }

            .header-left {
                flex-direction: column;
                gap: var(--space-3);
            }

            .header-actions {
                justify-content: stretch;
            }

            .info-horizontal {
                flex-direction: column;
                align-items: flex-start;
                gap: var(--space-4);
            }


            .header-title-section {
                flex-direction: column;
                align-items: flex-start;
                gap: var(--space-2);
            }

            .header-info {
                flex-direction: column;
                gap: var(--space-3);
            }

            .pricing-header,
            .pricing-row,
            .pricing-total {
                grid-template-columns: 1fr;
                gap: var(--space-2);
                text-align: left;
            }

            .cost-header,
            .cost-row,
            .cost-total {
                grid-template-columns: 1fr;
                gap: var(--space-2);
                text-align: left;
            }

            .pricing-total .total-label {
                grid-column: 1;
                text-align: left;
            }

            .tier-rate,
            .tier-amount,
            .cost-amount {
                text-align: left;
            }
        }
    </style>
</body>
</html>