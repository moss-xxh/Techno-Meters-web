<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-zh="è´¦å•è¯¦æƒ…" data-en="Bill Details">è´¦å•è¯¦æƒ…</title>
    <link rel="stylesheet" href="assets/css/common.css">
</head>
<body>
    <!-- å¯¼èˆªæ  -->
    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-brand">
                <h1 data-zh="èƒ½æºç®¡ç†ç³»ç»Ÿ" data-en="Energy Management System">èƒ½æºç®¡ç†ç³»ç»Ÿ</h1>
            </div>
            <div class="nav-menu">
                <a href="dashboard.html" class="nav-link" data-zh="ä»ªè¡¨æ¿" data-en="Dashboard">ä»ªè¡¨æ¿</a>
                <a href="users.html" class="nav-link" data-zh="ç”¨æˆ·ç®¡ç†" data-en="User Management">ç”¨æˆ·ç®¡ç†</a>
                <a href="bills.html" class="nav-link" data-zh="è´¦å•ç®¡ç†" data-en="Bill Management">è´¦å•ç®¡ç†</a>
                <a href="reports.html" class="nav-link" data-zh="æŠ¥è¡¨åˆ†æ" data-en="Reports">æŠ¥è¡¨åˆ†æ</a>
                <a href="settings.html" class="nav-link" data-zh="ç³»ç»Ÿè®¾ç½®" data-en="Settings">ç³»ç»Ÿè®¾ç½®</a>
            </div>
            <div class="nav-actions">
                <div class="lang-toggle">
                    <button class="lang-btn active" data-lang="zh">ä¸­æ–‡</button>
                    <button class="lang-btn" data-lang="en">EN</button>
                </div>
                <div class="user-menu">
                    <div class="user-avatar">ç®¡</div>
                    <span data-zh="ç®¡ç†å‘˜" data-en="Admin">ç®¡ç†å‘˜</span>
                </div>
            </div>
        </div>
    </nav>

    <!-- ä¸»å†…å®¹åŒºåŸŸ -->
    <main class="main-content">
        <div class="container">
            <!-- é¡µé¢æ ‡é¢˜å’Œè¿”å›æŒ‰é’® -->
            <div class="page-header">
                <div class="header-left">
                    <button class="btn btn-secondary" onclick="goBack()">
                        <span>â†</span>
                        <span data-zh="è¿”å›" data-en="Back">è¿”å›</span>
                    </button>
                    <div class="header-text">
                        <div class="header-title-section">
                            <span id="detail-username" class="user-name-header">Priya Sharma</span>
                            <span id="header-business-type" class="business-type">å±…æ°‘</span>
                        </div>
                        <div class="header-info">
                            <span class="header-info-item">
                                <span class="info-label" data-zh="ç”µè¡¨å·" data-en="Meter No.">ç”µè¡¨å·</span>
                                <span id="header-electric-number" class="info-value">1111111001</span>
                            </span>
                            <span class="header-info-item">
                                <span class="info-label" data-zh="åœ°å€" data-en="Address">åœ°å€</span>
                                <span id="header-address" class="info-value">æ³°ç±³å°”çº³å¾·</span>
                            </span>
                        </div>
                    </div>
                </div>
                <div class="header-actions">
                    <button class="btn btn-secondary" onclick="downloadBill()">
                        <span>ğŸ“„</span>
                        <span data-zh="ä¸‹è½½è´¦å•" data-en="Download Bill">ä¸‹è½½è´¦å•</span>
                    </button>
                </div>
            </div>

            <!-- ç”¨æˆ·åŸºæœ¬ä¿¡æ¯ -->
            <div class="bill-summary">
                <div class="info-horizontal">
                    <span class="info-pair">
                        <span class="label" data-zh="è´¦æœŸ" data-en="Billing Period">è´¦æœŸ</span>
                        <span id="detail-period" class="value">2025å¹´9æœˆ</span>
                    </span>
                    <span class="info-pair">
                        <span class="label" data-zh="è®¡è´¹æ–¹å¼" data-en="Billing Method">è®¡è´¹æ–¹å¼</span>
                        <span id="detail-billing-method" class="value">é˜¶æ¢¯ç”µè´¹</span>
                    </span>
                    <span class="info-pair">
                        <span class="label" data-zh="ç”¨ç”µé‡" data-en="Usage">ç”¨ç”µé‡</span>
                        <div class="usage-detail">
                            <span id="detail-usage" class="value">387 kWh</span>
                            <span id="reading-detail" class="reading-info">ï¼ˆå¼€å§‹ï¼š84,406 â€” ç»“æŸï¼š84,793ï¼‰</span>
                        </div>
                    </span>
                    <span class="info-pair">
                        <span class="label" data-zh="è´¹ç”¨" data-en="Cost">è´¹ç”¨</span>
                        <span id="detail-amount" class="value amount">â‚¹2546</span>
                    </span>
                </div>
            </div>


            <!-- è¯¦ç»†ä¿¡æ¯å±•ç¤ºåŒºåŸŸ -->
            <div class="details-grid">
                <!-- è´¦å•ç®¡ç†è¡¨æ ¼ -->
                <div class="cost-breakdown-section">
                    <div class="section-header">
                        <h4 data-zh="è´¦å•ç®¡ç†" data-en="Bill Management">è´¦å•ç®¡ç†</h4>
                    </div>
                    <div class="cost-table-container">
                        <div class="cost-table">
                            <div class="cost-header">
                                <span data-zh="é¡¹ç›®" data-en="Item">é¡¹ç›®</span>
                                <span data-zh="é‡‘é¢ï¼ˆå¢æ¯”ï¼‰" data-en="Amount (â‚¹)">é‡‘é¢ï¼ˆå¢æ¯”ï¼‰</span>
                                <span data-zh="è¯´æ˜" data-en="Description">è¯´æ˜</span>
                            </div>
                            <div id="cost-body" class="cost-body">
                                <!-- è´¹ç”¨æ˜ç»†æ•°æ®ç”±JavaScriptç”Ÿæˆ -->
                            </div>
                            <div class="cost-total">
                                <span class="final-label" data-zh="æ€»è´¹ç”¨" data-en="Total Cost">æ€»è´¹ç”¨</span>
                                <span class="final-amount" id="final-total-amount">â‚¹1,107</span>
                                <span class="final-desc" data-zh="å®é™…ç¼´è´¹é‡‘é¢" data-en="Actual Payment Amount">å®é™…ç¼´è´¹é‡‘é¢</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- é˜¶æ¢¯æ”¶è´¹è¡¨æ ¼ -->
                <div class="pricing-section">
                    <div class="section-header">
                        <h4 data-zh="é˜¶æ¢¯æ”¶è´¹æ˜ç»†" data-en="Tiered Pricing Details">é˜¶æ¢¯æ”¶è´¹æ˜ç»†</h4>
                    </div>
                    <div class="pricing-table-container">
                        <div class="pricing-table">
                            <div class="pricing-header">
                                <span data-zh="é˜¶æ¢¯" data-en="Tier">é˜¶æ¢¯</span>
                                <span data-zh="èŒƒå›´(kWh)" data-en="Range(kWh)">èŒƒå›´(kWh)</span>
                                <span data-zh="ç”µä»·(â‚¹/kWh)" data-en="Rate(â‚¹/kWh)">ç”µä»·(â‚¹/kWh)</span>
                                <span data-zh="ç”¨é‡(kWh)" data-en="Usage(kWh)">ç”¨é‡(kWh)</span>
                                <span data-zh="é‡‘é¢(â‚¹)" data-en="Amount(â‚¹)">é‡‘é¢(â‚¹)</span>
                            </div>
                            <div id="pricing-body" class="pricing-body">
                                <!-- é˜¶æ¢¯æ•°æ®ç”±JavaScriptç”Ÿæˆ -->
                            </div>
                            <div class="pricing-total">
                                <span class="total-label" data-zh="å°è®¡" data-en="Subtotal">å°è®¡</span>
                                <span class="total-usage" id="total-tier-usage">387</span>
                                <span class="total-amount" id="total-tier-amount">â‚¹900.00</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="assets/js/common.js"></script>
    <script>
        // åœ°åŒºæ•°æ®
        const regionsData = {
            'tamil-nadu': { name: 'æ³°ç±³å°”çº³å¾·', nameEn: 'Tamil Nadu' },
            'karnataka': { name: 'å¡çº³å¡”å…‹', nameEn: 'Karnataka' },
            'andhra-pradesh': { name: 'å®‰å¾—æ‹‰é‚¦', nameEn: 'Andhra Pradesh' },
            'kerala': { name: 'å–€æ‹‰æ‹‰', nameEn: 'Kerala' }
        };

        // è·å–URLå‚æ•°
        function getUrlParameter(name) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(name);
        }

        // ç”Ÿæˆè´¦å•è¯¦æƒ…æ•°æ®
        function generateBillDetails(bill, month) {
            // ç”Ÿæˆé˜¶æ¢¯æ”¶è´¹æ˜ç»†ï¼ˆä»…å¯¹é˜¶æ¢¯ç”µè´¹æ˜¾ç¤ºï¼‰
            if (bill.billingMethod === 'tiered') {
                generateTieredPricing(bill);
            } else {
                // å¯¹äºéé˜¶æ¢¯ç”µè´¹ï¼Œæ˜¾ç¤ºå•ä¸€è´¹ç‡
                generateSingleRate(bill);
            }
        }

        function generateTieredPricing(bill) {
            const pricingBody = document.getElementById('pricing-body');
            const totalUsage = bill.usage;

            // å°åº¦å±…æ°‘é˜¶æ¢¯ç”µä»·ç»“æ„
            const tiers = [
                { name: 'ç¬¬ä¸€é˜¶æ¢¯', range: '0-100', rate: 3.35, min: 0, max: 100 },
                { name: 'ç¬¬äºŒé˜¶æ¢¯', range: '101-200', rate: 4.60, min: 101, max: 200 },
                { name: 'ç¬¬ä¸‰é˜¶æ¢¯', range: '201-400', rate: 6.85, min: 201, max: 400 },
                { name: 'ç¬¬å››é˜¶æ¢¯', range: '400+', rate: 8.15, min: 401, max: Infinity }
            ];

            let remainingUsage = totalUsage;
            let totalAmount = 0;
            const tierDetails = [];

            tiers.forEach((tier, index) => {
                if (remainingUsage <= 0) {
                    tierDetails.push({
                        ...tier,
                        usage: 0,
                        amount: 0
                    });
                    return;
                }

                const tierCapacity = tier.max === Infinity ? remainingUsage : Math.min(tier.max - tier.min + 1, remainingUsage);
                const tierUsage = Math.min(remainingUsage, tierCapacity);
                const tierAmount = tierUsage * tier.rate;

                tierDetails.push({
                    ...tier,
                    usage: tierUsage,
                    amount: tierAmount
                });

                totalAmount += tierAmount;
                remainingUsage -= tierUsage;
            });

            // æ¸²æŸ“é˜¶æ¢¯è¡¨æ ¼
            pricingBody.innerHTML = tierDetails.map(tier => `
                <div class="pricing-row ${tier.usage > 0 ? 'used' : 'unused'}">
                    <span class="tier-name">${tier.name}</span>
                    <span class="tier-range">${tier.range}</span>
                    <span class="tier-rate">â‚¹${tier.rate.toFixed(2)}</span>
                    <span class="tier-usage">${tier.usage}</span>
                    <span class="tier-amount">â‚¹${tier.amount.toFixed(2)}</span>
                </div>
            `).join('');

            // æ›´æ–°é˜¶æ¢¯ç”µè´¹å°è®¡
            document.getElementById('total-tier-usage').textContent = totalUsage;
            document.getElementById('total-tier-amount').textContent = `â‚¹${totalAmount.toFixed(2)}`;

            // ç”Ÿæˆè´¹ç”¨æ˜ç»†
            generateCostBreakdown(totalAmount, totalUsage);
        }

        function generateCostBreakdown(electricityFee, usage) {
            const costBody = document.getElementById('cost-body');

            // è®¡ç®—å„é¡¹è´¹ç”¨
            const transmissionFee = electricityFee * 0.15; // è¾“é…ç”µè´¹ 15%
            const renewableFund = electricityFee * 0.02; // å¯å†ç”Ÿèƒ½æºåŸºé‡‘ 2%
            const subtotal = electricityFee + transmissionFee + renewableFund;
            const tax = subtotal * 0.05; // å¢å€¼ç¨ 5%
            const totalCost = subtotal + tax;

            const costItems = [
                {
                    item: currentLanguage === 'zh' ? 'ç”µè´¹ï¼ˆé˜¶æ¢¯ç”µä»·ï¼‰' : 'Electricity (Tiered Rate)',
                    amount: electricityFee,
                    description: currentLanguage === 'zh' ? `${usage}å•ä½ç”¨ç”µé‡è®¡ç®—` : `${usage} units electricity calculation`
                },
                {
                    item: currentLanguage === 'zh' ? 'è¾“é…ç”µè´¹' : 'Transmission & Distribution',
                    amount: transmissionFee,
                    description: currentLanguage === 'zh' ? `15% Ã— â‚¹${electricityFee.toFixed(0)}` : `15% of â‚¹${electricityFee.toFixed(0)}`
                },
                {
                    item: currentLanguage === 'zh' ? 'å¯å†ç”Ÿèƒ½æºåŸºé‡‘' : 'Renewable Energy Fund',
                    amount: renewableFund,
                    description: currentLanguage === 'zh' ? `2% Ã— â‚¹${electricityFee.toFixed(0)}` : `2% of â‚¹${electricityFee.toFixed(0)}`
                },
                {
                    item: currentLanguage === 'zh' ? 'å¢å€¼ç¨ï¼ˆ5%ï¼‰' : 'VAT (5%)',
                    amount: tax,
                    description: currentLanguage === 'zh' ? `5% Ã— â‚¹${subtotal.toFixed(0)}` : `5% of â‚¹${subtotal.toFixed(0)}`
                }
            ];

            // æ¸²æŸ“è´¹ç”¨æ˜ç»†è¡¨æ ¼
            costBody.innerHTML = costItems.map(item => `
                <div class="cost-row">
                    <span class="cost-item">${item.item}</span>
                    <span class="cost-amount">â‚¹${item.amount.toFixed(0)}</span>
                    <span class="cost-desc">${item.description}</span>
                </div>
            `).join('');

            // æ›´æ–°æ€»è´¹ç”¨
            document.getElementById('final-total-amount').textContent = `â‚¹${totalCost.toFixed(0)}`;

            // åŒæ—¶æ›´æ–°é¡µé¢é¡¶éƒ¨çš„æ€»é‡‘é¢æ˜¾ç¤º
            document.getElementById('detail-amount').textContent = `â‚¹${totalCost.toFixed(0)}`;
        }

        function generateSingleRate(bill) {
            const pricingBody = document.getElementById('pricing-body');
            const baseElectricityFee = bill.usage * 4.5; // å‡è®¾ç»Ÿä¸€è´¹ç‡ä¸º4.5å¢æ¯”/å•ä½

            pricingBody.innerHTML = `
                <div class="pricing-row used">
                    <span class="tier-name">ç»Ÿä¸€è´¹ç‡</span>
                    <span class="tier-range">å…¨éƒ¨ç”¨é‡</span>
                    <span class="tier-rate">â‚¹4.50</span>
                    <span class="tier-usage">${bill.usage}</span>
                    <span class="tier-amount">â‚¹${baseElectricityFee.toFixed(2)}</span>
                </div>
            `;

            document.getElementById('total-tier-usage').textContent = bill.usage;
            document.getElementById('total-tier-amount').textContent = `â‚¹${baseElectricityFee.toFixed(2)}`;

            // ç”Ÿæˆè´¹ç”¨æ˜ç»†
            generateCostBreakdown(baseElectricityFee, bill.usage);
        }

        function goBack() {
            window.history.back();
        }

        function downloadBill() {
            EnergySystem.showNotification('è´¦å•ä¸‹è½½åŠŸèƒ½å¼€å‘ä¸­...', 'info');
        }

        function payBill() {
            EnergySystem.showNotification('è·³è½¬åˆ°ä»˜è´¹é¡µé¢...', 'info');
        }

        // é¡µé¢åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // è®¾ç½®å½“å‰é¡µé¢å¯¼èˆª
            EnergySystem.setActiveNavigation('bills.html');

            // åˆå§‹åŒ–è¯­è¨€ç³»ç»Ÿ
            EnergySystem.initLanguageSystem();

            // è·å–è´¦å•IDå‚æ•°
            const billId = getUrlParameter('id');
            const month = getUrlParameter('month') || '2025-09';

            if (billId) {
                // æ¨¡æ‹Ÿè·å–è´¦å•æ•°æ®ï¼ˆå®é™…åº”è¯¥ä»åç«¯APIè·å–ï¼‰
                const mockBill = {
                    id: billId,
                    userName: 'Priya Sharma',
                    userNameEn: 'Priya Sharma',
                    avatar: 'P',
                    usage: 387,
                    amount: 156.78,
                    region: 'tamil-nadu',
                    businessType: 'residential',
                    billingMethod: 'tiered',
                    electricNumber: billId.padStart(10, '1')
                };

                // å¡«å……é¡µé¢æ•°æ®
                const businessTypeTexts = {
                    zh: { residential: 'å±…æ°‘', industrial: 'å·¥ä¸š', commercial: 'å•†ä¸š', agricultural: 'å†œä¸š' },
                    en: { residential: 'Residential', industrial: 'Industrial', commercial: 'Commercial', agricultural: 'Agricultural' }
                };

                const billingMethodTexts = {
                    zh: { tiered: 'é˜¶æ¢¯ç”µè´¹', 'time-of-use': 'åˆ†æ—¶ç”µä»·', 'flat-rate': 'å•ä¸€ç”µä»·', 'peak-valley': 'å³°è°·ç”µä»·' },
                    en: { tiered: 'Tiered', 'time-of-use': 'Time-of-Use', 'flat-rate': 'Flat Rate', 'peak-valley': 'Peak-Valley' }
                };

                // å¡«å……åŸºæœ¬ä¿¡æ¯
                document.getElementById('detail-username').textContent = currentLanguage === 'zh' ? mockBill.userName : mockBill.userNameEn;
                document.getElementById('header-business-type').textContent = businessTypeTexts[currentLanguage][mockBill.businessType];

                // å¡«å……é¡µé¢å¤´éƒ¨ä¿¡æ¯
                document.getElementById('header-electric-number').textContent = mockBill.electricNumber;
                document.getElementById('header-address').textContent = regionsData[mockBill.region].name;

                // å¡«å……è´¦æœŸä¿¡æ¯
                const monthText = currentLanguage === 'zh' ?
                    `${month.split('-')[0]}å¹´${parseInt(month.split('-')[1])}æœˆ` :
                    new Date(month + '-01').toLocaleDateString('en-US', { year: 'numeric', month: 'long' });
                document.getElementById('detail-period').textContent = monthText;
                document.getElementById('detail-billing-method').textContent = billingMethodTexts[currentLanguage][mockBill.billingMethod];

                // ç”ŸæˆæŠ„è¡¨è¯»æ•°ï¼ˆæ¨¡æ‹Ÿæ•°æ®ï¼‰
                const currentReading = Math.floor(Math.random() * 50000 + 50000);
                const previousReading = currentReading - mockBill.usage;

                // å¡«å……ç”¨ç”µé‡å’Œé‡‘é¢ä¿¡æ¯ï¼ˆåˆå§‹å€¼ï¼Œåç»­ä¼šè¢«è´¹ç”¨è®¡ç®—æ›´æ–°ï¼‰
                document.getElementById('detail-usage').textContent = `${mockBill.usage} kWh`;
                const readingText = currentLanguage === 'zh' ?
                    `ï¼ˆå¼€å§‹ï¼š${previousReading.toLocaleString()} â€” ç»“æŸï¼š${currentReading.toLocaleString()}ï¼‰` :
                    `ï¼ˆStart: ${previousReading.toLocaleString()} â€” End: ${currentReading.toLocaleString()}ï¼‰`;
                document.getElementById('reading-detail').textContent = readingText;
                document.getElementById('detail-amount').textContent = `â‚¹${mockBill.amount.toFixed(0)}`;

                // ç”Ÿæˆè¯¦ç»†æ•°æ®
                generateBillDetails(mockBill, month);
            } else {
                EnergySystem.showNotification('æœªæ‰¾åˆ°è´¦å•ä¿¡æ¯', 'error');
                setTimeout(() => {
                    window.location.href = 'bills.html';
                }, 2000);
            }
        });
    </script>

    <style>
        /* é¡µé¢å¤´éƒ¨æ ·å¼ */
        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: var(--space-8);
            gap: var(--space-6);
        }

        .header-left {
            display: flex;
            align-items: flex-start;
            gap: var(--space-4);
        }

        .header-title-section {
            display: flex;
            align-items: center;
            gap: var(--space-3);
            margin-bottom: var(--space-1);
        }

        .header-title-section h2 {
            font-size: 28px;
            font-weight: var(--font-weight-medium);
            margin: 0;
        }

        .user-name-header {
            font-size: 28px;
            font-weight: var(--font-weight-medium);
            color: var(--text-primary);
        }

        .header-info {
            display: flex;
            gap: var(--space-6);
            margin-top: var(--space-3);
        }

        .header-info-item {
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }

        .info-label {
            font-size: 14px;
            font-weight: var(--font-weight-medium);
            color: var(--text-secondary);
        }

        .info-value {
            font-size: 15px;
            font-weight: var(--font-weight-medium);
            color: var(--text-primary);
        }

        .header-actions {
            display: flex;
            gap: var(--space-3);
        }

        /* è´¦å•æ¦‚è¦å¡ç‰‡ */
        .bill-summary {
            margin-bottom: var(--space-8);
            padding: var(--space-6);
            background: var(--background);
            border: var(--border);
            border-radius: var(--radius);
        }

        .info-horizontal {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
        }

        .info-pair {
            display: flex;
            align-items: center;
            gap: var(--space-2);
            flex: 1;
            justify-content: center;
        }

        .info-pair .label {
            font-size: 16px;
            font-weight: var(--font-weight-medium);
            color: var(--text-secondary);
        }

        .info-pair .value {
            font-size: 16px;
            font-weight: var(--font-weight-semibold);
            color: var(--text-primary);
        }

        .info-pair .value.amount {
            font-size: 20px;
            color: var(--primary);
            font-family: 'Monaco', 'Courier New', monospace;
        }

        .usage-detail {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--space-1);
        }

        .reading-info {
            font-size: 12px;
            color: var(--text-tertiary);
            font-weight: var(--font-weight-regular);
        }


        /* è¯¦ç»†ä¿¡æ¯ç½‘æ ¼å¸ƒå±€ */
        .details-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-8);
            margin-bottom: var(--space-8);
        }

        /* é˜¶æ¢¯æ”¶è´¹å’Œè´¹ç”¨æ˜ç»†è¡¨æ ¼ */
        .pricing-section,
        .cost-breakdown-section {
            background: var(--background);
            border: var(--border);
            border-radius: var(--radius);
            overflow: hidden;
        }

        .section-header {
            padding: var(--space-5);
            background: var(--surface);
            border-bottom: var(--border);
        }

        .section-header h4 {
            margin: 0;
            font-size: 18px;
            font-weight: var(--font-weight-medium);
        }

        .pricing-table-container,
        .cost-table-container {
            padding: var(--space-5);
        }

        .pricing-table,
        .cost-table {
            border: var(--border);
            border-radius: var(--radius);
            overflow: hidden;
        }

        .pricing-header,
        .cost-header {
            display: grid;
            gap: var(--space-3);
            background: var(--divider);
            padding: var(--space-4);
            font-weight: var(--font-weight-semibold);
            font-size: 14px;
            color: var(--text-primary);
        }

        .pricing-header {
            grid-template-columns: 1.5fr 1fr 1fr 1fr 1fr;
        }

        .cost-header {
            grid-template-columns: 2fr 1fr 2fr;
        }

        .pricing-body,
        .cost-body {
            max-height: none;
        }

        .pricing-row,
        .cost-row {
            display: grid;
            gap: var(--space-3);
            padding: var(--space-4);
            border-bottom: var(--border);
            font-size: 14px;
            transition: all 0.15s ease;
        }

        .pricing-row {
            grid-template-columns: 1.5fr 1fr 1fr 1fr 1fr;
        }

        .cost-row {
            grid-template-columns: 2fr 1fr 2fr;
        }

        .pricing-row:last-child,
        .cost-row:last-child {
            border-bottom: none;
        }

        .pricing-row.used {
            background: rgba(40, 167, 69, 0.05);
            border-left: 4px solid var(--success);
        }

        .pricing-row.unused {
            background: var(--surface);
            opacity: 0.6;
        }

        .cost-row {
            background: var(--background);
        }

        .cost-row:nth-child(even) {
            background: var(--surface);
        }

        .pricing-total,
        .cost-total {
            display: grid;
            gap: var(--space-3);
            padding: var(--space-4);
            background: var(--primary);
            color: white;
            font-weight: var(--font-weight-semibold);
        }

        .pricing-total {
            grid-template-columns: 1.5fr 1fr 1fr 1fr 1fr;
        }

        .cost-total {
            grid-template-columns: 2fr 1fr 2fr;
        }

        .pricing-total .total-label {
            grid-column: 1 / 4;
            text-align: right;
        }

        .cost-total .final-label {
            font-size: 16px;
        }

        .cost-total .final-amount {
            font-size: 18px;
            font-weight: var(--font-weight-bold);
        }

        .cost-total .final-desc {
            font-size: 13px;
            opacity: 0.9;
        }

        .tier-name,
        .cost-item {
            font-weight: var(--font-weight-medium);
        }

        .tier-rate,
        .tier-amount,
        .cost-amount {
            font-family: 'Monaco', 'Courier New', monospace;
            text-align: right;
        }

        .tier-usage {
            text-align: center;
        }

        .cost-desc {
            font-size: 13px;
            color: var(--text-secondary);
        }

        /* ä¸šæ€æ ·å¼ */
        .business-type {
            padding: var(--space-1) var(--space-2);
            border-radius: calc(var(--radius) / 2);
            font-size: 12px;
            font-weight: var(--font-weight-medium);
            display: inline-block;
        }

        .business-type {
            background: rgba(40, 167, 69, 0.1);
            color: var(--success);
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 1200px) {
            .details-grid {
                grid-template-columns: 1fr;
                gap: var(--space-6);
            }

            .info-horizontal {
                flex-wrap: wrap;
                gap: var(--space-6);
            }
        }

        @media (max-width: 768px) {
            .page-header {
                flex-direction: column;
                align-items: stretch;
                gap: var(--space-4);
            }

            .header-left {
                flex-direction: column;
                gap: var(--space-3);
            }

            .header-actions {
                justify-content: stretch;
            }

            .info-horizontal {
                flex-direction: column;
                align-items: flex-start;
                gap: var(--space-4);
            }


            .header-title-section {
                flex-direction: column;
                align-items: flex-start;
                gap: var(--space-2);
            }

            .header-info {
                flex-direction: column;
                gap: var(--space-3);
            }

            .pricing-header,
            .pricing-row,
            .pricing-total {
                grid-template-columns: 1fr;
                gap: var(--space-2);
                text-align: left;
            }

            .cost-header,
            .cost-row,
            .cost-total {
                grid-template-columns: 1fr;
                gap: var(--space-2);
                text-align: left;
            }

            .pricing-total .total-label {
                grid-column: 1;
                text-align: left;
            }

            .tier-rate,
            .tier-amount,
            .cost-amount {
                text-align: left;
            }
        }
    </style>
</body>
</html>